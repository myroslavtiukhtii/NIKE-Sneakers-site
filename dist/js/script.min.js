document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".header");e.querySelector(".burger").addEventListener("click",()=>{e.classList.toggle("header--menu-active")}),window.addEventListener("scroll",function(){var t=document.querySelectorAll(".reveal");for(let e=0;e<t.length;e++){var n=window.innerHeight;t[e].getBoundingClientRect().top<n-150?t[e].classList.add("active"):t[e].classList.remove("active")}});const t=document.getElementById("upbtn");window.onscroll=function(){20<document.body.scrollTop||20<document.documentElement.scrollTop?t.style.display="flex":t.style.display="none"},t.addEventListener("click",function(){document.body.scrollTop=0,document.documentElement.scrollTop=0});let n=[{productTitle:"Air Maxi",productImg:"./img/topsneakers-image-1.png",productPrice:120},{productTitle:"React Gusto",productImg:"./img/topsneakers-image-2.png",productPrice:220},{productTitle:"Air Mini",productImg:"./img/topsneakers-image-3.png",productPrice:203},{productTitle:"Air Super",productImg:"./img/topsneakers-image-1.png",productPrice:240},{productTitle:"Reactis Peresto",productImg:"./img/topsneakers-image-2.png",productPrice:120}];const c=document.querySelector(".topsneakers__list");for(let e=0;e<n.length;e++)c.insertAdjacentHTML("beforeend",`
      <div class="sneakers-list__item">
        <img class="picture" src="${n[e].productImg}" alt="${n[e].productTitle}">
        <h3 class="productName">
            ${n[e].productTitle}
        </h3>
        <a class="link modal-link" aria-label="Icon link to modal window">
            $${n[e].productPrice}
            <svg class="icon">
                <use xlink:href="img/sprite.svg#new-link-icon"></use>
            </svg>
        </a>
      </div>`);tns({container:".my-slider",loop:!1,items:1.1,slideBy:1,nav:!1,autoplay:!1,fixedWidth:240,gutter:10,center:!1,edgePadding:10,speed:400,autoplayButtonOutput:!1,mouseDrag:!0,controlsContainer:"#customize-controls",responsive:{768:{items:2.1},1170:{items:3,gutter:120,fixedWidth:300}}});let l=document.querySelectorAll(".modal-link"),o=document.querySelector(".topsneakers__modal--back");document.getElementById("close-window").addEventListener("click",g),document.getElementById("cancel-order").addEventListener("click",g),document.getElementById("orderProduct").addEventListener("click",function(){L.push(parseInt(y.textContent.replace(/[^\d.]/g,"")));let t=0;for(let e=0;e<L.length;e++)t+=L[e];s.innerText="$ "+t,o.style.display="none",function(){{var e;0<L.length&&(e=parseInt(p.textContent.replace(/[^\d.]/g,"")),k+=e,f.innerHTML="Items: "+k,T.innerHTML=k)}!function(){let t={};{var e;t.title=a.innerHTML,t.img=u.src,t.quantity=Number(p.textContent),M.innerHTML="",B.some(e=>e.title===t.title)?(e=B.findIndex(e=>e.title==t.title),B[e].quantity=B[e].quantity+t.quantity):0<t.quantity&&B.push(t)}!function(){for(let e=0;e<B.length;e++)M.insertAdjacentHTML("beforeend",`
      <li class="items__product">
          <span class="product__count">${e+1}</span>
          <h4 class="product__title">${B[e].title}</h4>
          <span class="product__quantity">${B[e].quantity}</span>
          <img class="product__img" src="${B[e].img}" alt="${B[e].title}">
      </li>
    `)}()}()}()});const i=document.getElementById("date"),r=document.getElementById("arrival");document.getElementsByClassName("price");const d=document.getElementById("modalPrice");document.querySelectorAll(".productName");const s=document.getElementById("totalPrice"),a=document.getElementById("product"),u=document.getElementById("productPicture");document.querySelectorAll(".picture");const m=document.querySelectorAll(".sneakers-list__item");function g(){o.style.display="none",y.innerHTML=0}l.forEach(function(e){e.addEventListener("click",function(){m.forEach(function(e){e.addEventListener("click",function(){var e=[],e=(e.push(this.innerText.replace(/[0-9, $, \n]/g,"")),a.innerHTML=e[0],this.querySelector(".picture")),e=(u.src=e.src,this.querySelector(".link"));d.innerHTML=e.textContent,y.innerHTML=e.textContent})}),p.innerHTML=1;var e=document.getElementById("orderNumber");e.innerHTML=Math.ceil(2e3*Math.random()),e=new Date,i.innerHTML=e.getHours()+":"+e.getMinutes()+"-"+e.getDate()+"/"+e.getMonth(),r.innerHTML=e.getDate()+5+"/"+e.getMonth(),o.style.display="block"})});const p=document.getElementById("quantity");document.getElementById("minusItem").addEventListener("click",function(){{var e;p.innerHTML--,0<p.innerHTML?(v=p.innerHTML,e=parseInt(d.textContent.replace(/[^\d.]/g,"")),y.innerHTML="$ "+v*e):0==p.innerHTML?y.innerHTML=0:p.innerHTML=0}}),document.getElementById("plusItem").addEventListener("click",function(){p.innerHTML++,v=p.innerHTML;var e=parseInt(d.textContent.replace(/[^\d.]/g,""));E=y.innerHTML="$ "+v*e});const y=document.getElementById("modalTotalPrice");let v,E;let L=[];document.getElementById("basketBtn").addEventListener("click",function(){I.classList.toggle("active")});let I=document.querySelector(".basket");document.getElementById("closeBasket").addEventListener("click",H);const T=document.getElementById("basketItems");document.getElementById("resetBasket").addEventListener("click",h),document.getElementById("orderBasket").addEventListener("click",function(){h(),H()});const f=document.getElementById("itemsCard");let k=0;const M=document.querySelector(".basket-items__list");let B=[];function h(){k=0,s.innerText=0,T.innerHTML="",M.innerHTML="",f.innerHTML=0,L=[],B=[];var t=document.querySelectorAll(".imgitems");for(let e=0;e<t.length;e++)t[e].src="";var n=document.querySelectorAll(".imgItemsQuantity");for(let e=0;e<n.length;e++)n[e].innerText=""}function H(){I.classList.toggle("active")}var q=document.querySelectorAll(".btnMail");const S=document.querySelector(".modal-email__back");document.getElementById("cancelMail").addEventListener("click",function(){S.style.display="none"});var _=document.querySelectorAll(".btnName");const x=document.getElementById("text"),b=document.getElementById("email"),P=document.getElementById("success");document.getElementById("btnCloseMdlSuc").addEventListener("click",function(){P.style.display="none"});function A(){0!==x.value.length&&"Please enter your name"!==x.value&&"Please enter your email"!==b.value?(S.style.display="none",localStorage.setItem("Name",x.value),localStorage.setItem("Email",b.value),P.style.display="flex",document.querySelector(".name").innerHTML=x.value):x.value="Please enter your name",b.value="Please enter your email"}function $(){S.style.display="flex"}_.forEach(function(e){e.addEventListener("click",A)}),q.forEach(function(e){e.addEventListener("click",$)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJIRUFERVIiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwid2luZG93IiwibGV0IiwicmV2ZWFsRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaSIsImxlbmd0aCIsIndpbmRvd0hlaWdodCIsImlubmVySGVpZ2h0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwiYWRkIiwicmVtb3ZlIiwiVVBCVVRUT04iLCJnZXRFbGVtZW50QnlJZCIsIm9uc2Nyb2xsIiwiYm9keSIsInNjcm9sbFRvcCIsImRvY3VtZW50RWxlbWVudCIsInN0eWxlIiwiZGlzcGxheSIsInByb2R1Y3RJdGVtcyIsInByb2R1Y3RUaXRsZSIsInByb2R1Y3RJbWciLCJwcm9kdWN0UHJpY2UiLCJTTkVBS0VSU0xJU1QiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJ0bnMiLCJjb250YWluZXIiLCJsb29wIiwiaXRlbXMiLCJzbGlkZUJ5IiwibmF2IiwiYXV0b3BsYXkiLCJmaXhlZFdpZHRoIiwiZ3V0dGVyIiwiY2VudGVyIiwiZWRnZVBhZGRpbmciLCJzcGVlZCIsImF1dG9wbGF5QnV0dG9uT3V0cHV0IiwibW91c2VEcmFnIiwiY29udHJvbHNDb250YWluZXIiLCJyZXNwb25zaXZlIiwiNzY4IiwiMTE3MCIsIm1vZGFsQnRuQmFza2V0IiwibW9kYWwiLCJjbG9zZVdpbmRvdyIsInRvdGFsUHJpY2UiLCJwdXNoIiwicGFyc2VJbnQiLCJNT0RBTFRPVEFMUFJJQ0UiLCJyZXBsYWNlIiwic3VtVG90YWxQcmljZSIsIlRPVEFMUFJJQ0UiLCJpbm5lclRleHQiLCJudW1JdGVtcyIsIk1PREFMUVVBTlRJVFkiLCJjb3VudCIsIkNBUkRJVEVNUyIsImlubmVySFRNTCIsIklURU1TQkFTS0VUIiwiYWRkUHJvZHVjdHNUb0Jhc2tldCIsInByb2R1Y3QiLCJpbmRleEV4aXN0UHJvZHVjdCIsInRpdGxlIiwiTU9EQUxQUk9EVUNUTkFNRSIsImltZyIsIk1PREFMUElDVFVSRSIsInNyYyIsInF1YW50aXR5IiwiTnVtYmVyIiwidGV4dENvbnRlbnQiLCJCQVNLRVRQUk9EVUNUUyIsInByb2R1Y3RCYXNrZXRBcnIiLCJzb21lIiwiZSIsImZpbmRJbmRleCIsInJlbmRlclByb2R1Y3RMSXN0IiwiREFURSIsIkFSUklWQUwiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiTU9EQUxQUklDRSIsIlNORUFLRVJJVEVNIiwiZm9yRWFjaCIsInByb2R1Y3ROYW1lIiwiaW1nc3JjIiwidGhpcyIsInByaWNlIiwiT1JERVJOVU1CRVIiLCJNYXRoIiwiY2VpbCIsInJhbmRvbSIsIm5ld0RhdGUiLCJEYXRlIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0RGF0ZSIsImdldE1vbnRoIiwic3VtIiwibnVtYmVyIiwidG90YWxQcmljZVZhbHVlIiwiYmFza2V0IiwiY2xvc2VCYXNrZXQiLCJ0b1Jlc2V0QmFza2V0IiwiUkVNT1ZFSU1HIiwiUkVNT1ZFSU1HSVRFTVMiLCJCVE5NQUlMIiwiTU9EQUxFTUFJTCIsIkJUTlNFTkQiLCJJTlBVVE5BTUUiLCJJTlBVVE1BSUwiLCJNT0RBTFNVQ0NFU1MiLCJzYXZlVXNlck5hbWUiLCJ2YWx1ZSIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJvcGVuTWFpbCJdLCJtYXBwaW5ncyI6IkFBQUFBLFNBQUFDLGlCQUFBLG1CQUFBLEtBRUEsTUFBQUMsRUFBQUYsU0FBQUcsY0FBQSxTQUFBLEVBQ0FELEVBQUFDLGNBQUEsU0FBQSxFQUVBRixpQkFBQSxRQUFBLEtBQ0FDLEVBQUFFLFVBQUFDLE9BQUEscUJBQUEsQ0FDQSxDQUFBLEVBa0JBQyxPQUFBTCxpQkFBQSxTQWhCQSxXQUNBTSxJQUFBQyxFQUFBUixTQUFBUyxpQkFBQSxTQUFBLEVBRUEsSUFBQUYsSUFBQUcsRUFBQSxFQUFBQSxFQUFBRixFQUFBRyxPQUFBRCxDQUFBLEdBQUEsQ0FDQUgsSUFBQUssRUFB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UixHQUNBQSxFQUFBaEYsaUJBQUEsUUFBQXFILENBQUEsQ0FDQSxDQUFBLEVBdUJBTixFQUFBdkIsUUFBQSxTQUFBUixHQUNBQSxFQUFBaEYsaUJBQUEsUUFBQXlILENBQUEsQ0FDQSxDQUFBLENBYUEsQ0FBQSIsImZpbGUiOiJzY3JpcHQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuXHJcbmNvbnN0IEhFQURFUiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKTtcclxuY29uc3QgQlVUVE9OID0gSEVBREVSLnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXInKTtcclxuXHJcbkJVVFRPTi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIEhFQURFUi5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXItLW1lbnUtYWN0aXZlJyk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gcmV2ZWFsV2hlblNjcm9sbCgpIHtcclxuICBsZXQgcmV2ZWFsRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJldmVhbFwiKTtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXZlYWxFbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgIGxldCBlbGVtZW50VG9wID0gcmV2ZWFsRWxlbWVudHNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG4gICAgbGV0IGVsZW1lbnRWaXNpYmxlID0gMTUwO1xyXG5cclxuICAgIGlmIChlbGVtZW50VG9wIDwgd2luZG93SGVpZ2h0IC0gZWxlbWVudFZpc2libGUpIHtcclxuICAgICAgcmV2ZWFsRWxlbWVudHNbaV0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldmVhbEVsZW1lbnRzW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG4gIFxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCByZXZlYWxXaGVuU2Nyb2xsKTtcclxuXHJcbmNvbnN0IFVQQlVUVE9OID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwYnRuJyk7XHJcbndpbmRvdy5vbnNjcm9sbCA9IGZ1bmN0aW9uKCkge3Njcm9sbEZ1bmN0aW9uKCl9O1xyXG5cclxuZnVuY3Rpb24gc2Nyb2xsRnVuY3Rpb24oKSB7XHJcbiAgaWYgKGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID4gMjAgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA+IDIwKSB7XHJcbiAgICBVUEJVVFRPTi5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XHJcbiAgfSBlbHNlIHtcclxuICAgIFVQQlVUVE9OLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICB9XHJcbn07XHJcblxyXG5VUEJVVFRPTi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvVXBXaW5kb3cpO1xyXG5mdW5jdGlvbiB0b1VwV2luZG93KCkge1xyXG4gIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gMDtcclxuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wID0gMDtcclxufTtcclxuXHJcbmxldCBwcm9kdWN0SXRlbXMgPSBbXHJcbiAge1xyXG4gICAgcHJvZHVjdFRpdGxlOiBcIkFpciBNYXhpXCIsXHJcbiAgICBwcm9kdWN0SW1nOiBcIi4vaW1nL3RvcHNuZWFrZXJzLWltYWdlLTEucG5nXCIsXHJcbiAgICBwcm9kdWN0UHJpY2U6IDEyMCxcclxuICB9LFxyXG4gIHtcclxuICAgIHByb2R1Y3RUaXRsZTogXCJSZWFjdCBHdXN0b1wiLFxyXG4gICAgcHJvZHVjdEltZzogXCIuL2ltZy90b3BzbmVha2Vycy1pbWFnZS0yLnBuZ1wiLFxyXG4gICAgcHJvZHVjdFByaWNlOiAyMjBcclxuICB9LFxyXG4gIHtcclxuICAgIHByb2R1Y3RUaXRsZTogXCJBaXIgTWluaVwiLFxyXG4gICAgcHJvZHVjdEltZzogXCIuL2ltZy90b3BzbmVha2Vycy1pbWFnZS0zLnBuZ1wiLFxyXG4gICAgcHJvZHVjdFByaWNlOiAyMDNcclxuICB9LFxyXG4gIHtcclxuICAgIHByb2R1Y3RUaXRsZTogXCJBaXIgU3VwZXJcIixcclxuICAgIHByb2R1Y3RJbWc6IFwiLi9pbWcvdG9wc25lYWtlcnMtaW1hZ2UtMS5wbmdcIixcclxuICAgIHByb2R1Y3RQcmljZTogMjQwXHJcbiAgfSxcclxuICB7XHJcbiAgICBwcm9kdWN0VGl0bGU6IFwiUmVhY3RpcyBQZXJlc3RvXCIsXHJcbiAgICBwcm9kdWN0SW1nOiBcIi4vaW1nL3RvcHNuZWFrZXJzLWltYWdlLTIucG5nXCIsXHJcbiAgICBwcm9kdWN0UHJpY2U6IDEyMFxyXG4gIH1cclxuXTtcclxuXHJcbmNvbnN0IFNORUFLRVJTTElTVCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b3BzbmVha2Vyc19fbGlzdCcpO1xyXG5cclxuZnVuY3Rpb24gaW5zZXJ0UHJvZHVjdHNUb0xpc3QoKSB7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9kdWN0SXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgU05FQUtFUlNMSVNULmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBcclxuICAgICAgYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwic25lYWtlcnMtbGlzdF9faXRlbVwiPlxyXG4gICAgICAgIDxpbWcgY2xhc3M9XCJwaWN0dXJlXCIgc3JjPVwiJHtwcm9kdWN0SXRlbXNbaV0ucHJvZHVjdEltZ31cIiBhbHQ9XCIke3Byb2R1Y3RJdGVtc1tpXS5wcm9kdWN0VGl0bGV9XCI+XHJcbiAgICAgICAgPGgzIGNsYXNzPVwicHJvZHVjdE5hbWVcIj5cclxuICAgICAgICAgICAgJHtwcm9kdWN0SXRlbXNbaV0ucHJvZHVjdFRpdGxlfVxyXG4gICAgICAgIDwvaDM+XHJcbiAgICAgICAgPGEgY2xhc3M9XCJsaW5rIG1vZGFsLWxpbmtcIiBhcmlhLWxhYmVsPVwiSWNvbiBsaW5rIHRvIG1vZGFsIHdpbmRvd1wiPlxyXG4gICAgICAgICAgICAkJHtwcm9kdWN0SXRlbXNbaV0ucHJvZHVjdFByaWNlfVxyXG4gICAgICAgICAgICA8c3ZnIGNsYXNzPVwiaWNvblwiPlxyXG4gICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVwiaW1nL3Nwcml0ZS5zdmcjbmV3LWxpbmstaWNvblwiPjwvdXNlPlxyXG4gICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICA8L2E+XHJcbiAgICAgIDwvZGl2PmApXHJcbiAgfVxyXG59O1xyXG5cclxuaW5zZXJ0UHJvZHVjdHNUb0xpc3QoKVxyXG5cclxuY29uc3Qgc2xpZGVyID0gdG5zKHtcclxuICBjb250YWluZXI6ICcubXktc2xpZGVyJyxcclxuICBsb29wOiBmYWxzZSxcclxuICBpdGVtczogMS4xLFxyXG4gIHNsaWRlQnk6IDEsXHJcbiAgbmF2OiBmYWxzZSwgICAgXHJcbiAgYXV0b3BsYXk6IGZhbHNlLFxyXG4gIGZpeGVkV2lkdGg6IDI0MCxcclxuICBndXR0ZXI6IDEwLFxyXG4gIGNlbnRlcjogZmFsc2UsXHJcbiAgZWRnZVBhZGRpbmc6IDEwLFxyXG4gIHNwZWVkOiA0MDAsXHJcbiAgYXV0b3BsYXlCdXR0b25PdXRwdXQ6IGZhbHNlLFxyXG4gIG1vdXNlRHJhZzogdHJ1ZSxcclxuICBjb250cm9sc0NvbnRhaW5lcjogXCIjY3VzdG9taXplLWNvbnRyb2xzXCIsXHJcbiAgcmVzcG9uc2l2ZToge1xyXG4gICAgICA3Njg6IHtcclxuICAgICAgICAgIGl0ZW1zOiAyLjEsXHJcbiAgICAgIH0sXHJcbiAgICAgIDExNzA6IHtcclxuICAgICAgICAgIGl0ZW1zOiAzLFxyXG4gICAgICAgICAgZ3V0dGVyOiAxMjAsXHJcbiAgICAgICAgICBmaXhlZFdpZHRoOiAzMDAsXHJcbiAgICAgIH1cclxuICB9XHJcblxyXG59KTtcclxuXHJcbmxldCBtb2RhbEJ0bkJhc2tldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbC1saW5rJyk7XHJcbmxldCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50b3BzbmVha2Vyc19fbW9kYWwtLWJhY2snKTtcclxubGV0IGNsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlLXdpbmRvdycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VXaW5kb3cpO1xyXG5sZXQgY2FuY2VsT3JkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FuY2VsLW9yZGVyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZVdpbmRvdyk7XHJcbmxldCBvcmRlckJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcmRlclByb2R1Y3QnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlV2luT3BlbkJhc2t0KTtcclxubGV0IGNsaWNrZWQgPSBmYWxzZTtcclxuY29uc3QgREFURSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRlJyk7XHJcbmNvbnN0IEFSUklWQUwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXJyaXZhbCcpO1xyXG5jb25zdCBJVEVNUFJJQ0UgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwcmljZScpO1xyXG5jb25zdCBNT0RBTFBSSUNFID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsUHJpY2UnKTtcclxuY29uc3QgUFJPRFVDVE5BTUUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZHVjdE5hbWUnKTtcclxuY29uc3QgVE9UQUxQUklDRSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3RhbFByaWNlJyk7XHJcbmNvbnN0IE1PREFMUFJPRFVDVE5BTUUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZHVjdCcpO1xyXG5jb25zdCBNT0RBTFBJQ1RVUkUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZHVjdFBpY3R1cmUnKTtcclxuY29uc3QgSU1HID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBpY3R1cmUnKTtcclxuY29uc3QgU05FQUtFUklURU0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc25lYWtlcnMtbGlzdF9faXRlbScpO1xyXG5cclxuZnVuY3Rpb24gZ2V0RGF0YUZyb21Qcm9kdWN0KCkge1xyXG4gIFNORUFLRVJJVEVNLmZvckVhY2goZnVuY3Rpb24oZSkge1xyXG4gICAgZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgIGxldCBwcm9kdWN0TmFtZSA9IFtdO1xyXG4gICAgICBwcm9kdWN0TmFtZS5wdXNoKCh0aGlzLmlubmVyVGV4dCkucmVwbGFjZSgvWzAtOSwgJCwgXFxuXS9nLCAnJykpO1xyXG4gICAgICBNT0RBTFBST0RVQ1ROQU1FLmlubmVySFRNTCA9IHByb2R1Y3ROYW1lWzBdO1xyXG4gIFxyXG4gICAgICBsZXQgaW1nc3JjID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcucGljdHVyZScpO1xyXG4gICAgICBNT0RBTFBJQ1RVUkUuc3JjID0gaW1nc3JjLnNyYztcclxuXHJcbiAgICAgIGxldCBwcmljZSA9IHRoaXMucXVlcnlTZWxlY3RvcignLmxpbmsnKTtcclxuICAgICAgTU9EQUxQUklDRS5pbm5lckhUTUwgPSBwcmljZS50ZXh0Q29udGVudDtcclxuICAgICAgTU9EQUxUT1RBTFBSSUNFLmlubmVySFRNTCA9IHByaWNlLnRleHRDb250ZW50O1xyXG4gIFxyXG4gICAgfSlcclxuICB9KTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGdldFByaWNlRnJvbVByb2R1Y3QoKSB7XHJcbiAgbW9kYWxCdG5CYXNrZXQuZm9yRWFjaChmdW5jdGlvbihlKSB7XHJcbiAgICBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgIGdldERhdGFGcm9tUHJvZHVjdCgpO1xyXG4gICAgICBnZXRNb2RhbERldGFpbHMoKTtcclxuICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5nZXRQcmljZUZyb21Qcm9kdWN0KCk7XHJcblxyXG5mdW5jdGlvbiBnZXRNb2RhbERldGFpbHMoKSB7XHJcbiAgTU9EQUxRVUFOVElUWS5pbm5lckhUTUwgPSAxO1xyXG5cclxuICBjb25zdCBPUkRFUk5VTUJFUiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcmRlck51bWJlcicpO1xyXG4gIE9SREVSTlVNQkVSLmlubmVySFRNTCA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMjAwMCk7XHJcblxyXG4gIGxldCBuZXdEYXRlID0gbmV3IERhdGUoKTtcclxuICBEQVRFLmlubmVySFRNTCA9IG5ld0RhdGUuZ2V0SG91cnMoKStcIjpcIisgbmV3RGF0ZS5nZXRNaW51dGVzKCkrIFwiLVwiICsgbmV3RGF0ZS5nZXREYXRlKCkgKyBcIi9cIiArIG5ld0RhdGUuZ2V0TW9udGgoKTtcclxuICBBUlJJVkFMLmlubmVySFRNTCA9IG5ld0RhdGUuZ2V0RGF0ZSgpICsgNSArIFwiL1wiICsgbmV3RGF0ZS5nZXRNb250aCgpO1xyXG5cclxuICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gY2xvc2VXaW5kb3coKSB7XHJcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIE1PREFMVE9UQUxQUklDRS5pbm5lckhUTUwgPSAwO1xyXG59O1xyXG5cclxuY29uc3QgTU9EQUxRVUFOVElUWSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWFudGl0eScpO1xyXG5jb25zdCBCVE5NSU5VU0lURU0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWludXNJdGVtJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBtaW51c1Byb2R1Y3RzKTtcclxuY29uc3QgQlROUExVU0lURU0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGx1c0l0ZW0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBsdXNQcm9kdWN0cyk7XHJcbmNvbnN0IE1PREFMVE9UQUxQUklDRSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbFRvdGFsUHJpY2UnKTtcclxubGV0IG51bWJlcjtcclxubGV0IHRvdGFsUHJpY2VWYWx1ZTtcclxuXHJcbmZ1bmN0aW9uIG1pbnVzUHJvZHVjdHMoKSB7XHJcbiAgTU9EQUxRVUFOVElUWS5pbm5lckhUTUwtLTtcclxuICBpZiAoTU9EQUxRVUFOVElUWS5pbm5lckhUTUwgPiAwKSB7XHJcbiAgICBudW1iZXIgPSBNT0RBTFFVQU5USVRZLmlubmVySFRNTDtcclxuICAgIGxldCBzdW0gPSBwYXJzZUludCgoTU9EQUxQUklDRS50ZXh0Q29udGVudCkucmVwbGFjZSgvW15cXGQuXS9nLCAnJykpO1xyXG4gICAgTU9EQUxUT1RBTFBSSUNFLmlubmVySFRNTCA9IGAkICR7bnVtYmVyICogc3VtfWA7XHJcbiAgfSBlbHNlIGlmIChNT0RBTFFVQU5USVRZLmlubmVySFRNTCA9PSAwKSB7XHJcbiAgICBNT0RBTFRPVEFMUFJJQ0UuaW5uZXJIVE1MID0gMDtcclxuICB9IGVsc2UgTU9EQUxRVUFOVElUWS5pbm5lckhUTUwgPSAwO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gcGx1c1Byb2R1Y3RzKCkge1xyXG4gIE1PREFMUVVBTlRJVFkuaW5uZXJIVE1MKys7XHJcbiAgbnVtYmVyID0gTU9EQUxRVUFOVElUWS5pbm5lckhUTUw7XHJcbiAgbGV0IHN1bSA9IHBhcnNlSW50KChNT0RBTFBSSUNFLnRleHRDb250ZW50KS5yZXBsYWNlKC9bXlxcZC5dL2csICcnKSk7XHJcbiAgdG90YWxQcmljZVZhbHVlID0gTU9EQUxUT1RBTFBSSUNFLmlubmVySFRNTCA9IGAkICR7bnVtYmVyICogc3VtfWA7XHJcbn07XHJcblxyXG5sZXQgdG90YWxQcmljZSA9IFtdO1xyXG5cclxuZnVuY3Rpb24gY2xvc2VXaW5PcGVuQmFza3QoKSB7XHJcbiAgdG90YWxQcmljZS5wdXNoKHBhcnNlSW50KChNT0RBTFRPVEFMUFJJQ0UudGV4dENvbnRlbnQpLnJlcGxhY2UoL1teXFxkLl0vZywgJycpKSk7XHJcbiAgbGV0IHN1bVRvdGFsUHJpY2UgPSAwO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsUHJpY2UubGVuZ3RoOyBpKyspIHtcclxuICAgIHN1bVRvdGFsUHJpY2UgKz0gdG90YWxQcmljZVtpXTtcclxuICB9O1xyXG5cclxuICBUT1RBTFBSSUNFLmlubmVyVGV4dCA9IGAkICR7c3VtVG90YWxQcmljZX1gO1xyXG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICBvcGVuQmFza2V0KCk7XHJcbn07XHJcblxyXG5jb25zdCBCQVNLRVRCVVRUT04gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFza2V0QnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuQmFza2V0SWNvbik7XHJcbmxldCBiYXNrZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFza2V0Jyk7XHJcbmxldCB0b0Nsb3NlQmFza2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlQmFza2V0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUJhc2tldCk7XHJcbmNvbnN0IElURU1TQkFTS0VUID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jhc2tldEl0ZW1zJyk7XHJcbmNvbnN0IFJFU0VUQkFTS0VUID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc2V0QmFza2V0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b1Jlc2V0QmFza2V0KTtcclxuY29uc3QgT1JERVJCQVNLRVQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3JkZXJCYXNrZXQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9yZGVyQmFza2V0KTtcclxuY29uc3QgQ0FSRElURU1TID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW1zQ2FyZCcpO1xyXG5cclxubGV0IGltZztcclxubGV0IGltZ0l0ZW1zUXVhbnRpdHk7XHJcbmxldCBjb3VudCA9IDA7XHJcblxyXG5jb25zdCBCQVNLRVRQUk9EVUNUUyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5iYXNrZXQtaXRlbXNfX2xpc3QnKTtcclxubGV0IHByb2R1Y3RCYXNrZXRBcnIgPSBbXTtcclxuXHJcbmZ1bmN0aW9uIGFkZFByb2R1Y3RzVG9CYXNrZXQoKSB7XHJcblxyXG4gIGxldCBwcm9kdWN0ID0ge307XHJcbiAgcHJvZHVjdC50aXRsZSA9IE1PREFMUFJPRFVDVE5BTUUuaW5uZXJIVE1MO1xyXG4gIHByb2R1Y3QuaW1nID0gTU9EQUxQSUNUVVJFLnNyYztcclxuICBwcm9kdWN0LnF1YW50aXR5ID0gTnVtYmVyKE1PREFMUVVBTlRJVFkudGV4dENvbnRlbnQpO1xyXG5cclxuICBCQVNLRVRQUk9EVUNUUy5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgaWYgKHByb2R1Y3RCYXNrZXRBcnIuc29tZShlID0+IGUudGl0bGUgPT09IHByb2R1Y3QudGl0bGUpKSB7XHJcblxyXG4gICAgbGV0IGluZGV4RXhpc3RQcm9kdWN0ID0gcHJvZHVjdEJhc2tldEFyci5maW5kSW5kZXgoKGUgPT4gZS50aXRsZSA9PSBwcm9kdWN0LnRpdGxlKSk7XHJcbiAgICBwcm9kdWN0QmFza2V0QXJyW2luZGV4RXhpc3RQcm9kdWN0XS5xdWFudGl0eSA9IHByb2R1Y3RCYXNrZXRBcnJbaW5kZXhFeGlzdFByb2R1Y3RdLnF1YW50aXR5ICsgcHJvZHVjdC5xdWFudGl0eTtcclxuXHJcbiAgfSBlbHNlIGlmIChwcm9kdWN0LnF1YW50aXR5ID4gMCkge1xyXG4gICAgcHJvZHVjdEJhc2tldEFyci5wdXNoKHByb2R1Y3QpO1xyXG4gIH07XHJcblxyXG4gIHJlbmRlclByb2R1Y3RMSXN0KCk7XHJcblxyXG5cclxufTtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlclByb2R1Y3RMSXN0KCkge1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvZHVjdEJhc2tldEFyci5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgIEJBU0tFVFBST0RVQ1RTLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBgXHJcbiAgICAgIDxsaSBjbGFzcz1cIml0ZW1zX19wcm9kdWN0XCI+XHJcbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2R1Y3RfX2NvdW50XCI+JHtpICsgMX08L3NwYW4+XHJcbiAgICAgICAgICA8aDQgY2xhc3M9XCJwcm9kdWN0X190aXRsZVwiPiR7cHJvZHVjdEJhc2tldEFycltpXS50aXRsZX08L2g0PlxyXG4gICAgICAgICAgPHNwYW4gY2xhc3M9XCJwcm9kdWN0X19xdWFudGl0eVwiPiR7cHJvZHVjdEJhc2tldEFycltpXS5xdWFudGl0eX08L3NwYW4+XHJcbiAgICAgICAgICA8aW1nIGNsYXNzPVwicHJvZHVjdF9faW1nXCIgc3JjPVwiJHtwcm9kdWN0QmFza2V0QXJyW2ldLmltZ31cIiBhbHQ9XCIke3Byb2R1Y3RCYXNrZXRBcnJbaV0udGl0bGV9XCI+XHJcbiAgICAgIDwvbGk+XHJcbiAgICBgKVxyXG4gIH07XHJcbn07XHJcblxyXG5cclxuZnVuY3Rpb24gb3BlbkJhc2tldEljb24oKSB7XHJcbiAgYmFza2V0LmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gb3BlbkJhc2tldCgpIHtcclxuICBpZiAodG90YWxQcmljZS5sZW5ndGggPiAwKSB7XHJcbiAgICBsZXQgbnVtSXRlbXMgPSBwYXJzZUludCgoTU9EQUxRVUFOVElUWS50ZXh0Q29udGVudCkucmVwbGFjZSgvW15cXGQuXS9nLCAnJykpO1xyXG4gICAgY291bnQgKz0gbnVtSXRlbXM7XHJcbiAgICBDQVJESVRFTVMuaW5uZXJIVE1MID0gYEl0ZW1zOiAke2NvdW50fWA7XHJcbiAgICBJVEVNU0JBU0tFVC5pbm5lckhUTUwgPSBjb3VudDtcclxuICB9XHJcbiAgYWRkUHJvZHVjdHNUb0Jhc2tldCgpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gdG9SZXNldEJhc2tldCgpIHtcclxuICBjb3VudCA9IDA7XHJcbiAgVE9UQUxQUklDRS5pbm5lclRleHQgPSAwO1xyXG4gIElURU1TQkFTS0VULmlubmVySFRNTCA9ICcnO1xyXG4gIEJBU0tFVFBST0RVQ1RTLmlubmVySFRNTCA9ICcnO1xyXG4gIENBUkRJVEVNUy5pbm5lckhUTUwgPSAwO1xyXG4gIHRvdGFsUHJpY2UgPSBbXTtcclxuICBwcm9kdWN0QmFza2V0QXJyID0gW107XHJcbiAgXHJcbiAgY29uc3QgUkVNT1ZFSU1HID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmltZ2l0ZW1zJyk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBSRU1PVkVJTUcubGVuZ3RoOyBpKyspIHtcclxuICAgIFJFTU9WRUlNR1tpXS5zcmMgPSAnJztcclxuICB9XHJcblxyXG4gIGNvbnN0IFJFTU9WRUlNR0lURU1TID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmltZ0l0ZW1zUXVhbnRpdHknKTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IFJFTU9WRUlNR0lURU1TLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBSRU1PVkVJTUdJVEVNU1tpXS5pbm5lclRleHQgPSAnJztcclxuICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBjbG9zZUJhc2tldCgpIHtcclxuICBiYXNrZXQuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBvcmRlckJhc2tldCgpIHtcclxuICB0b1Jlc2V0QmFza2V0KCk7XHJcbiAgY2xvc2VCYXNrZXQoKTtcclxufTtcclxuXHJcbmNvbnN0IEJUTk1BSUwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYnRuTWFpbCcpO1xyXG5jb25zdCBNT0RBTEVNQUlMID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWVtYWlsX19iYWNrJyk7XHJcbmNvbnN0IENMT1NFTU9EQUxNQUlMID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbE1haWwnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvQ2xvc2VNYWlsKTtcclxuY29uc3QgQlROU0VORCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idG5OYW1lJyk7XHJcbmNvbnN0IElOUFVUTkFNRSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXh0Jyk7XHJcbmNvbnN0IElOUFVUTUFJTCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpO1xyXG5jb25zdCBNT0RBTFNVQ0NFU1MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VjY2VzcycpO1xyXG5jb25zdCBCVE5DTE9TRVNVQyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5DbG9zZU1kbFN1YycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9DbG9zZU1vZGFsU3VjY3NzZWMpO1xyXG5cclxuQlROU0VORC5mb3JFYWNoKGZ1bmN0aW9uKGUpIHtcclxuICBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2F2ZVVzZXJOYW1lKTtcclxuICB9KTtcclxuXHJcbmZ1bmN0aW9uIHNhdmVVc2VyTmFtZSgpIHtcclxuICBpZiAoSU5QVVROQU1FLnZhbHVlLmxlbmd0aCAhPT0gMCAmJiBJTlBVVE5BTUUudmFsdWUgIT09IFwiUGxlYXNlIGVudGVyIHlvdXIgbmFtZVwiICYmIElOUFVUTUFJTC52YWx1ZSAhPT0gXCJQbGVhc2UgZW50ZXIgeW91ciBlbWFpbFwiKSB7XHJcbiAgICBNT0RBTEVNQUlMLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiTmFtZVwiLCBJTlBVVE5BTUUudmFsdWUpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJFbWFpbFwiLCBJTlBVVE1BSUwudmFsdWUpO1xyXG4gICAgZnVuY3Rpb24gb3BlbnN1Y2Nlc3MoKSB7XHJcbiAgICBNT0RBTFNVQ0NFU1Muc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gICAgY29uc3QgTkFNRSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYW1lJyk7XHJcbiAgICBOQU1FLmlubmVySFRNTCA9IElOUFVUTkFNRS52YWx1ZTtcclxuICB9XHJcbiAgb3BlbnN1Y2Nlc3MoKVxyXG4gIH0gZWxzZSBcclxuICAgICAgSU5QVVROQU1FLnZhbHVlID0gXCJQbGVhc2UgZW50ZXIgeW91ciBuYW1lXCI7XHJcbiAgICAgIElOUFVUTUFJTC52YWx1ZSA9IFwiUGxlYXNlIGVudGVyIHlvdXIgZW1haWxcIjtcclxuICBcclxufTtcclxuXHJcbmZ1bmN0aW9uIHRvQ2xvc2VNb2RhbFN1Y2Nzc2VjKCkge1xyXG4gIE1PREFMU1VDQ0VTUy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbn07XHJcblxyXG5CVE5NQUlMLmZvckVhY2goZnVuY3Rpb24oZSkge1xyXG4gIGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuTWFpbCk7XHJcbiAgfSk7XHJcblxyXG5mdW5jdGlvbiBvcGVuTWFpbCgpIHtcclxuICBNT0RBTEVNQUlMLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcclxufTtcclxuXHJcbmZ1bmN0aW9uIHRvQ2xvc2VNYWlsKCkge1xyXG4gIE1PREFMRU1BSUwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG59O1xyXG5cclxuXHJcbiAgXHJcblxyXG59KTsiXX0=
